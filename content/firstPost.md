Title: Setting up this blog using the Pelican+Conda+GitHub Pages
date: 2016-12-23 03:42
tags: Pelican
category: How-To
author: Abraham Vinod
summary: Customary hello world post with Pelican

# Prelude
I have been postponing my foray into blogging for some time now. Well, this
holiday season I decided to present myself with the gift of blogging. I had done
a bit of blogging using [DokuWiki](https://www.dokuwiki.org/) back when I was at
IIT Madras, but my site was hacked due to my neglience of the security settings.
To make things simple, I am choosing a static website for blogging this time. I will
stick with [Pelican](https://blog.getpelican.com/) due to my comfort level with
Python. 

On reading about Pelican, I discovered that the norm appears to be to replace the customary
"Hello World" post with a post on how one sets up the blog using Pelican.
The journey on understanding Pelican definitely is not straight-forward as one would like to hope for.
However, among the numerous posts I read on the internet, I would like to
especially thank the "Hello World" posts from Mr. Hartley's
[blog](http://beneathdata.com/how-to/how-i-built-this-website), Mr. Vincent's
[blog](http://algorithmshop.com/20131212-starting-a-blog.html/), and Mr.
Jerome's [blog](http://ntanjerome.org/blog/how-to-setup-github-user-page-with-pelican/).

# How did I get my blog setup?

## Setting up Conda and Pelican

I am working on Windows 10 OS, and I will by using
[msysgit](https://git-for-windows.github.io/)[^1] to emulate the Unix terminal
in my PC. I had already installed conda in Windows, and this is easily
accessible from msysgit as well. I used [conda](https://github.com/conda/conda)
to create a basic python environment for Pelican.   
~~~
$ conda create -n blog python=2
~~~
Note that pelican-quickstart does not work as is
with this copy. You will have to fork the bleeding edge (at the time of
writing) of Pelican and not using the conda's default Pelican.  Unzip the [git
repository](https://github.com/abyvinod/pelican/archive/master.zip) into a
directory of your choice, say *PelicanBase*.
~~~
$ source activate blog                  # Activate the conda environment
$ cd PelicanBase
$ python setup.py install               # Install pelican
$ conda install markdown                # Install markdown
~~~
This installs pelican and fab.

## Setting up the blog
At this point, we are now ready to start laying the foundation for the blog.
~~~
$ mkdir path/to/blog
$ cd path/to/blog
$ pelican-quickstart                    # Should have worked, but will fail
~~~
You will have to replace the == in the line number given in the error message
with >=. See [this
conversation](https://github.com/getpelican/pelican/issues/2043#issuecomment-268625132)
for more details. If all is good, then you will posed with a series of questions
    that initializes your blog.

## Rendering the blog

I like to automate things. Fabric is a great tool that works with Pelican to
automate publishing.
~~~
$ conda install fabric                  # Install fabric
$ fab build                             # Builds the blog
$ fab regenerate & fab serve &          # Serves the blog at localhost:8000 while freeing the terminal
~~~
    
## Creating the first post

Create *firstPost.md* containing a title and date[^2].
~~~
$ mkdir content
$ echo 'Title: Test content
> Date: 2016' > content/firstPost.md      # '>' is autogenerated when ENTER is pressed.
~~~
The automation renders the new blog when the webpage is refreshed.

## Updating github pages

This problem was solved by going through [this Hello World
post](http://ntanjerome.org/blog/how-to-setup-github-user-page-with-pelican/).
Thanks a lot! I had to also follow the advice given
[here](https://github.com/getnikola/nikola/issues/2223#issuecomment-174193643)
and installed ghp-import via 
~~~
pip install --upgrade git+https://github.com/ionelmc/python-ghp-import
~~~
as opposed to the standard Conda installation. 

To summarize [that
post](http://ntanjerome.org/blog/how-to-setup-github-user-page-with-pelican/),

1. Ensure that you are on the 'source' branch
+ Add/commit everything except the *output* folder 
+ Create a new branch 'gh-pages'
+ Run the following bash script to automate the *updation of GitHub pages*
```
commitMSG="$1"
echo $commitMSG
fab build
git commit -am "$commitMSG"
ghp-import output
git checkout master
git merge gh-pages -m "$commitMSG"
git pull
git push -u --all
git checkout source
```
Future updates at Github with the local copy is now easy.
~~~
source bp "Commit Message"
~~~

Test 1

[^1]: $ sign denotes bash prompt.
[^2]: Title and date is the minimum requirement for a blog post.
